var RecordContent = require('content/record-content/record-content');

var RecordBuilder = function RecordBuilderImpl() {
    var fields = [];

    this.add = function(value) {
        fields.push(value.toString());
    };

    this.build = function() {
        return new RecordContent.Record(fields);
    };
};

var RecordContentBuilder = function RecordContentBuilderImpl() {
    var records = [];

    this.add = function() {
        var record = new RecordBuilder();

        for (var i = 0; i < arguments.length; ++i) {
            if (arguments[i] instanceof Array) {
                for (var j = 0; j < arguments[i].length; ++j) {
                    record.add(arguments[i][j]);
                }
            } else {
                record.add(arguments[i]);
            }
        }

        records.push(record);
        return record;
    };

    this.build = function() {
        var $records = [];

        records.forEach(function(record) {
            $records.push(record.build());
        });

        return new RecordContent($records);
    };
};

module.exports = RecordContentBuilder;